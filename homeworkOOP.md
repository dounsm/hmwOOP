# 《面向对象程序设计训练》作业

## 一、项目目标
构建一个**人工神经网络（ANN）**的面向对象程序设计训练项目，实现以下核心功能：
1. **模型导入/导出**：支持ANN格式（至少）
2. **模型编辑**：增删改查层（Layer）、神经元（Neuron）、突触（Synapse）
3. **模型验证与推理**：检查网络合理性（无环、全连接）并执行前向传播

---

## 二、核心架构要求
### 1. 类设计原则
- **严格面向对象**：
  - 禁止非类成员函数（除主函数、运算符重载、lambda）。
  - 禁止全局变量，所有数据成员必须私有。
  - 所有只读函数需标记为`const`。
- **MVC模式**：
  - **可重用类（Model）**：`Neuron`、`Layer`、`Network`、`ActivationFunction`等需完全解耦，可独立复用。
  - **控制器类（Controller）**：单例模式，负责业务逻辑（如导入/导出、编辑、推理）。
  - **界面类（View）**：必须封装为类，允许使用开发环境自动生成代码。

### 2. 技术约束
- **标准限制**：仅使用C++11及以上标准语法和STL，禁止操作系统API和第三方库（源码级引入需标注版权）。
- **文件组织**：
  - 头文件（.hpp）仅声明，源文件（.cpp）仅实现。
  - 每个文件仅包含一个类或一类函数。
  - 头文件需用`#ifndef`防重复包含。

---

## 三、功能需求
### 1. 模型文件操作
- **导入**：从ANN文件解析网络结构（神经元、层、突触）到内存对象。
- **导出**：将内存对象序列化为ANN格式文件。

### 2. 模型编辑
- **层操作**：
  - 列出所有层（序号、神经元数量）。
  - 添加/删除层（删除层需清理关联突触）。
- **神经元操作**：
  - 列出层内神经元（序号、偏置）。
  - 修改神经元偏置，删除神经元（清理关联突触）。
- **突触操作**：
  - 列出神经元的突触连接（前驱/后继）。
  - 连接相邻层的神经元（需检查是否已存在连接）。

### 3. 验证与推理
- **验证网络合理性**：
  - 输入可从首层传递到末层。
  - 无环状连接。
  - 所有神经元参与计算。
- **推理**：
  - 输入首层数据，逐层前向传播，输出末层结果。

---

## 四、ANN文件格式（附录1）
- **结构**：
  - `#`：注释行。
  - `G`：网络名称（唯一）。
  - `N`：神经元（格式：`N <bias> <激活函数编号>`）。
  - `L`：层（格式：`L <最小神经元索引> <最大神经元索引>`）。
  - `S`：突触（格式：`S <起点索引> <终点索引> <权重>`）。
- **顺序规则**：
  - 神经元（N）→层（L）→突触（S）连续出现。

---

## 五、编码规范（附录2）
### 1. 代码风格
- **格式**：
  - 缩进4空格，行末注释对齐。
  - 长语句（>80字符）需换行，操作符置于行首。
- **命名**：
  - **变量**：`作用域前缀_类型前缀物理意义`（如`m_iCount`）。
  - **类/函数**：大驼峰命名（如`CalculateOutput`）。
  - **常量/宏**：全大写（如`MAX_SIZE`）。
- **注释**：
  - 文件、类、函数需用统一模板注释（功能、参数、返回值等）。
  - 注释量≥代码行数的1/3。

### 2. 安全与可维护性
- **内存管理**：
  - `new/delete`成对使用，释放后置`nullptr`。
  - 禁止`goto`，禁用浮点数精确比较。
- **类设计**：
  - 必须定义默认构造、拷贝构造、赋值运算符、析构函数（虚析构函数需为`virtual`）。
  - 禁止`public`数据成员（除非无读写规则）。

---

## 六、评分标准
- **基本功能（10%）**：功能实现与鲁棒性。
- **类设计（60%）**：
  - MVC模式（15%）。
  - 可重用类的抽象与复用性（25%）。
  - 正确性与代码规范（20%）。
- **代码规范（30%）**：每违规1处扣1%，扣完为止。

---

## 七、提交要求
- **提交内容**：
  - 压缩包（学号命名）：仅含`.hpp/.cpp`文件、开发环境说明（OS/编辑器/编译器版本）。
  - 禁止提交可执行文件、工程文件、中间文件。

---

## 八、关键提醒
- **设计优先**：先抽象可重用类（如`Neuron`、`Layer`），再实现业务逻辑。
- **避免硬编码**：支持未来扩展（如ONNX格式）需用继承体系设计导入器/导出器。
- **尽早提交**：预留调试时间，避免网络/环境问题。